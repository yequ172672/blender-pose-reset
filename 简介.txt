# blender-pose-reset
测试 beta

测试用脚本，chat gpt编写,将骨骼一键转换为tpose的思路,在3dsmax中验证过可行

先说思路，在max中导入能直接看到骨骼自带的旋转，也就是世界空间旋转（blender中）
而blender是以模型导入时的姿势为初始姿势，出来用脚本输出没找到方法能直接调整

岑缨的模型导入blender是默认是Apose
右胳膊骨骼 'Bip01 R UpperArm' 的世界空间旋转角度：[-2.6838353225577696, 126.58299430287587, 0.9114538467404111]
将其设定为【0，180，0】时会伸直胳膊

由此引申出五个数值（-180，-90，0，90，180）

    实现方法1：

先用脚本导出骨骼名称和其世界空间旋转的数据
而后另建一个脚本用来处理数据
将旋转数据与上面五个数值进行比较，取值一个最接近的设为角度
其中有两条限制-180<= X <= -100  100<= y <= 180
xy需要取值为-180和180,而不是90,具体原理不清楚,就像上面,胳膊需要伸直的话y轴为180

举个例子A（13，89，-67) B(-30 -97 127)
比较数值后取A(0 90 -90)  B(0 -90 180)

将头以下的人体主干骨骼,不包括衣服配饰等物理骨骼,设置为整数数值后会变成横平竖直的标准tpose

但多次修改代码后始终不能直接指定blender中骨骼的世界空间旋转,问gpt也说不出所以然来,我个人数学水平不太行
多个版本只能在骨骼已有旋转上进行加减,从而引申出另一个思路,但计算也不符合预期

方法1我在3dsmax中手动为骨骼修改角度为（-180，-90，0，90，180）,修改完成后是tpose

以下是思路2

由于方法1中始终不能指定数值,所以想到了用目标数值减去骨骼旋转,来让骨骼调整后变为整数

比较大小后选取（-180，-90，0，90，180）中最接近的一个数值，减去骨骼已有角度后得到需要调整的角度
依旧有两条限制-180<= X <= -100  100<= y <= 180

还是上面的例子A（13，89，-67) B(-30 -97 127)
计算后A（0-13，90-89，-90-(-67)) B(0-(-30) -90-(-97) 180-127)
得到A(-13 1 23) B(30 7 53)  也就是原始AB加上计算后的AB能够等于（-180，-90，0，90，180）
从而曲线救国改为tpose

但是又出了问题,脚本运行后得到的旋转不符合预期

A
骨骼 'Bip01 R UpperArm' 的世界空间旋转角度：[-2.6838353225577696, 126.58299430287587, 0.9114538467404111]
骨骼 'Bip01 R Forearm' 的世界空间旋转角度：[9.290498441132215, 127.10182913260839, 15.844314251664153]
骨骼 'Bip01 R Hand' 的世界空间旋转角度：[96.07333841256181, 125.73486239287871, 16.067963673394345]
B
骨骼 'Bip01 R UpperArm' 的世界空间旋转角度：[2.683835536, 53.4170056971, -0.91145374]
骨骼 'Bip01 R Forearm' 的世界空间旋转角度：[-9.2905018562, 52.8981708674, -15.8443142517]
骨骼 'Bip01 R Hand' 的世界空间旋转角度：[-6.0733384126, 54.2651376071, -16.0679636734]
C
骨骼 'Bip01 R UpperArm' 的世界空间旋转角度：[1.8169351199384691, 179.95957028906986, 3.6083441154013083]
骨骼 'Bip01 R Forearm' 的世界空间旋转角度：[-6.482689635610012, -126.40999927157779, 26.153410756551416]
骨骼 'Bip01 R Hand' 的世界空间旋转角度：[-33.62335471781529, -38.59762098089008, 123.92605071574091]
D
骨骼 'Bip01 R UpperArm' 的世界空间旋转角度：[0, 180,0]
骨骼 'Bip01 R Forearm' 的世界空间旋转角度：[0, -180,0]
骨骼 'Bip01 R Hand' 的世界空间旋转角度：[0, 0, 180]

A是原始数据，B是计算后的数据，C是实际运行后的数据，D是预期数据
按理来说A+B=D，但blender中脚本实际运行后得到了C

我数学不太好一直没看懂四元数和欧拉角的转换啥的



以下附上chatgpt的对话记录
计算（-180，-90，0，90，180）与骨骼数据差值https://chat.openai.com/share/9e29757a-9d43-45a7-8b0d-748e30aa9d0e
设置旋转数值 https://chat.openai.com/share/345ecc34-d859-4590-8c0d-0d34dad7a1ef
